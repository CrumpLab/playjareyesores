<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Play jar eye sores • playjareyesores</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Play jar eye sores">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">playjareyesores</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Using_playjaReyesir.html">Play jar eye sores</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><script src="Using_playjaReyesir_files/htmlwidgets-1.3/htmlwidgets.js"></script><script src="Using_playjaReyesir_files/dagre-0.0.1/dagre.min.js"></script><script src="Using_playjaReyesir_files/lodash-3.7.0/lodash.js"></script><script src="Using_playjaReyesir_files/nomnoml-0.2.0/nomnoml.js"></script><script src="Using_playjaReyesir_files/nomnoml-binding-0.1.0.9000/nomnoml.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Play jar eye sores</h1>
            
      
      
      <div class="hidden name"><code>Using_playjaReyesir.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(playjareyesores)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(nomnoml)</span></code></pre></div>
<p>Some brief background. Occassionally, I have students cheat on their essays or long-answer questions, typically by copying their answers from somewhere. My university provides access to plagiarism detection services like turnitin and safeassign, however these tools can be cumbersome to use. I have also sometimes resorted to using R for plagiarism detection. I am writing this package to collect my code for this purpose and put it one place.</p>
<p>Also, I am using this vignette as a pseudo blog to work out which kinds of functions to focus on building. So, this is a tutorial for myself.</p>
<div id="two-academic-papers" class="section level2">
<h2 class="hasAnchor">
<a href="#two-academic-papers" class="anchor"></a>Two academic papers</h2>
<p>I’m reviewing a paper right now. It’s very similar to another paper I’ve read by the same author. Whole chunks are copied from one previous paper to another. I can’t be bothered to “manually” figure out which parts are the same. It would be nice to have some R functions for this.</p>
<div id="htmlwidget-3970212724a91bffcae5" style="width:400px;height:150px;" class="nomnoml html-widget"></div>
<script type="application/json" data-for="htmlwidget-3970212724a91bffcae5">{"x":{"code":"\n  #fill: #FEFEFF\n  #lineWidth: 1\n  #zoom: 4\n  #direction: right\n   [paper 1 | get into R] -> [clean]\n[paper 2 | get into R] -> [clean]\n[clean | keep parts you want] -> [compare]\n[compare | lots of methods to try] -> [Report | Stuff you want to learn]","svg":false},"evals":[],"jsHooks":[]}</script><p>Ok, did some googling and tried out a bunch things. I found some great packages that already exist, so am going to play around with them a bit. These packages include <code>textreuse</code>, and <code>tabulizer</code> (which unfortunately depends on Java, but allows for importing pdfs with 2 columns, useful for scientific papers).</p>
</div>
<div id="import-and-cleaning-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#import-and-cleaning-functions" class="anchor"></a>Import and cleaning functions</h2>
<p>Here are some wrapper functions for importing pdfs or plain text, and doing some basic cleaning, involving, deleting new lines, deleting “-” which happens when lines run over in a .pdf, and converting everything to lowercase.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>p1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/clean_1_col_pdf.html">clean_1_col_pdf</a></span>(<span class="dt">file=</span><span class="st">"data/test1col.pdf"</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a>p2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/clean_2_col_pdf.html">clean_2_col_pdf</a></span>(<span class="dt">file=</span><span class="st">"data/CGM2006.pdf"</span>)</span>
<span id="cb2-3"><a href="#cb2-3"></a>p3 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/clean_plain_txt.html">clean_plain_txt</a></span>(<span class="dt">file=</span><span class="st">"data/sometext.txt"</span>)</span></code></pre></div>
</div>
<div id="compare-documents-using-textreuse" class="section level2">
<h2 class="hasAnchor">
<a href="#compare-documents-using-textreuse" class="anchor"></a>Compare documents using textreuse</h2>
<p>The <code>textreuse</code> package can do some heavy lifting in terms of comparing documents for overlap. Below I use the <code>align_local</code> function to compare two of my papers. Looks like my self-plagiarism is limited to one of the methods sections, which makes sense because these two papers would have used the same methods.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(textreuse)</span>
<span id="cb3-2"><a href="#cb3-2"></a>p1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/clean_2_col_pdf.html">clean_2_col_pdf</a></span>(<span class="dt">file=</span><span class="st">"data/CGM2006.pdf"</span>)</span>
<span id="cb3-3"><a href="#cb3-3"></a>p2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/clean_2_col_pdf.html">clean_2_col_pdf</a></span>(<span class="dt">file=</span><span class="st">"data/Crump et al. - 2008.pdf"</span>)</span>
<span id="cb3-4"><a href="#cb3-4"></a>test &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/textreuse/topics/align_local">align_local</a></span>(p1,p2)</span></code></pre></div>
<div class="row">
<div class="col-md-6">
<h2 id="crump-et-al.-2006">Crump et al. 2006</h2>
<p>[1] “participants were seated approximately 57 cm from the computer monitor at the beginning of each trial participants were presented with a fixation cross displayed in white against a black background for 1,000 #### msec ## followed by a blank interval of 250 msec ## next a color word prime was centrally displayed in white against a black background ### ######### ######### for 100 msec ## ########### following the prime display a colored ##### shape ##### probe display appeared participants were instructed to name the color of the probe as quickly and accurately as possible the probe was presented on the screen until the participant made a vocal response vocal response latencies were recorded with ##### a microphone and a voice activated relay timed the response from the onset of the probe display an experimenter coded each response as correct incorrect or spoil a spoil was defined as a trial in which noise unrelated to the onset of the intended response triggered the voice key after ### ####### the completion #### of #### the ### experiment participants were ## shown ########## pictures ## of congruent and incongruent ### trial ########### types in both ########## the ## high and low proportion congruent conditions the participants were then ######## asked #### to ### estimate ######## the ####### percentages of congruent ## and ######### incongruent ####### trial ########## types #### that occurred in both the high ##### and ### low #### proportion ## congruent ####### conditions ######### ### the ######### ## participants were ## asked #### to ########## give ### estimates ####### that #### summed to 100 for ## each #### of ####### the ###### proportion congruent conditions results for each participant response times rts for each condition were submitted to an outlier elimination procedure van selst jolicœur ######### 1994 mean rts were then computed from ##### those ### which ######### remained ############ these ### means ####### #### #### ########### were submitted to a repeated # measures anova that included proportion congruent high vs low and ## # congruency congruent vs incongruent as ######## within ######## participants ##### factors the mean rts in ### ##### ##### ### each condition collapsed across participants ## #### ########## are displayed in table 1.1 # the ##### ########## ## ######## ##### ### # ########### main effect of congruency was signif icant f 1,15 # 95.79 ## ###### mse 1,393.96 ###### p 0001 responses on ### congruent trials 486 msec were faster ### ## than responses on ### incongruent trials 577 ### msec ## more important the proportion congruent ## congruency interaction was significant f 1,15 # 7.87 ## ##### mse 133.11 ###### p 05 ### the stroop effect for the high proportion ######## condition was larger 99 ### msec ## than the stroop effect for the low proportion”</p>
</div>
<div class="col-md-6">
<h2 id="crump-et-al.-2008">Crump et al. 2008</h2>
<p>[1] “participants were seated approximately 57 cm from the computer monitor at the beginning of each trial participants were presented with a fixation cross displayed in white against a black background for ##### 1000 #### ms followed by a blank interval of 250 #### ms next a color word prime ### ######### displayed in white against a black background was presented centrally for 100 #### ms immediately following the prime display a ####### color ##### patch probe display appeared participants were instructed to name the color of the probe as quickly and accurately as possible the probe was presented on the screen until the participant made a vocal response vocal response latencies were recorded #### using a microphone and a voice activated relay timed the response from the onset of the probe display an experimenter coded each response as correct incorrect or spoil a spoil was defined as a trial in which noise unrelated to the onset of the intended response triggered the voice key ##### 2.2 results the ########## data ## from ### two ########## participants #### in ##### experiment ######## 1a ## ######### and ########### one ##### participant ##### in #### experiment ### 1b #### ### ### ########## ######### ########## ### ############ were #### excluded ##### from ## all ######## analyses ### because ########### of ######### an ### equipment ########### failure ##### associated ##### with #### ######## ## #### the #### voice ### key ### used ########## to ######### collect ########## responses for the remaining 15 participants #### in ##### each ## experiment #### rts ######### greater #### than ###### ## 100 ### ms #### from ## correct ### trials ########## ######### ########## ####### for #### ########### ######## ##### ### ### each condition were submitted to an outlier elimination procedure van selst ######## jolicoeur 1994 mean rts were then computed #### using ##### the ##### remaining ######## observations ##### the ##### results from both experiments were submitted to a ######## 2 ######## ##### #### ######## proportion congruent high vs low ### by 2 congruency congruent vs incongruent ## repeated ###### measures ############ anova ####### ### #### rts ## and error rates for each condition collapsed across participants in each experiment are displayed in table ### 2 ### 2.2.1 experiment 1a location there was a significant main effect of congruency ### ###### ##### f #### 1 ##### 14 386.70 mse ######## 403.17 p 0001 responses ## for congruent trials ### #### were faster 468 ms than responses ## for incongruent trials ### 570 #### ms more important the proportion congruent by congruency interaction was significant f #### 1 #### 14 12.11 mse ###### 184.02 p ## 005 the stroop effect for the high proportion location condition was larger ## 114 #### ms than the stroop effect for the low proportion”</p>
</div>
</div>
</div>
<div id="estimating-number-of-same-words" class="section level2">
<h2 class="hasAnchor">
<a href="#estimating-number-of-same-words" class="anchor"></a>Estimating number of same words</h2>
<p>The <code>align_local</code> function is interesting, it produces to strings, one for each document, that are lined up as well as possible, and identical in length. When words don’t line up, there is a fudge factor, and missing, deleted or different words are replaced with a hashtag. Here’s a quick and dirty way to figure out how many of the words exactly line up.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>al_summary &lt;-<span class="st"> </span><span class="kw"><a href="../reference/align_local_sum.html">align_local_sum</a></span>(test)</span>
<span id="cb4-2"><a href="#cb4-2"></a>al_summary<span class="op">$</span>sum</span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="co">#&gt; [1] 242</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>al_summary<span class="op">$</span>sentence</span></code></pre></div>
<p>[1] “participants were seated approximately 57 cm from the computer monitor at the beginning of each trial participants were presented with a fixation cross displayed in white against a black background for followed by a blank interval of 250 next a color word prime displayed in white against a black background for 100 following the prime display a probe display appeared participants were instructed to name the color of the probe as quickly and accurately as possible the probe was presented on the screen until the participant made a vocal response vocal response latencies were recorded a microphone and a voice activated relay timed the response from the onset of the probe display an experimenter coded each response as correct incorrect or spoil a spoil was defined as a trial in which noise unrelated to the onset of the intended response triggered the voice key the participants and in were of the the participants 100 for each condition were submitted to an outlier elimination procedure van selst 1994 mean rts were then computed were submitted to a proportion congruent high vs low congruency congruent vs incongruent rts each condition collapsed across participants are displayed in table main effect of congruency f mse p 0001 responses congruent trials were faster than responses incongruent trials more important the proportion congruent congruency interaction was significant f mse p the stroop effect for the high proportion condition was larger than the stroop effect for the low proportion”</p>
<p>This seems useful to me. The sentence that you are looking at didn’t necessarilly appear as consecutive words, however it gives a reasonable bird’s eye view of the overlap between two documents. If there are a big chunks here, one document was copied from another.</p>
</div>
<div id="n-gram-methods" class="section level2">
<h2 class="hasAnchor">
<a href="#n-gram-methods" class="anchor"></a>N gram methods</h2>
<p>Another useful way to detect overlap is to use n-gram methods. Here, I use the <code>tm</code> package to create a document term matrix for two texts. The function allows you to set the number of n-grams. All unique n-grams between the texts are computed and counted for each text. Then I fid the proportion of common n-grams between the two texts. In general, if texts use the same words, they will have some overlap, but as the number of n-grams grows, texts that are not the same will have vanishingly small overlap.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="kw"><a href="../reference/ngram_proportion_same.html">ngram_proportion_same</a></span>(p1,p2,<span class="dv">1</span>)</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="co">#&gt; [1] 0.3208059</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="kw"><a href="../reference/ngram_proportion_same.html">ngram_proportion_same</a></span>(p1,p2,<span class="dv">2</span>)</span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co">#&gt; [1] 0.1612376</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="kw"><a href="../reference/ngram_proportion_same.html">ngram_proportion_same</a></span>(p1,p2,<span class="dv">3</span>)</span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="co">#&gt; [1] 0.09709452</span></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="kw"><a href="../reference/ngram_proportion_same.html">ngram_proportion_same</a></span>(p1,p2,<span class="dv">4</span>)</span>
<span id="cb6-8"><a href="#cb6-8"></a><span class="co">#&gt; [1] 0.07081316</span></span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="kw"><a href="../reference/ngram_proportion_same.html">ngram_proportion_same</a></span>(p1,p2,<span class="dv">5</span>)</span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="co">#&gt; [1] 0.05574508</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#two-academic-papers">Two academic papers</a></li>
      <li><a href="#import-and-cleaning-functions">Import and cleaning functions</a></li>
      <li><a href="#compare-documents-using-textreuse">Compare documents using textreuse</a></li>
      <li><a href="#estimating-number-of-same-words">Estimating number of same words</a></li>
      <li><a href="#n-gram-methods">N gram methods</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Matt Crump.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
