<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Play jar eye sores: Multiple document comparison • playjareyesores</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Play jar eye sores: Multiple document comparison">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">playjareyesores</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/A_tutorial.html">Play jar eye sores</a>
    </li>
    <li>
      <a href="../articles/B_multidoc.html">Play jar eye sores: Multiple document comparison</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/CrumpLab/playjareyesores">
    <span class="fa fa-lg fa-github"></span>
     
    source code
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Play jar eye sores: Multiple document comparison</h1>
            
      
      
      <div class="hidden name"><code>B_multidoc.rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(playjareyesores)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(magrittr)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co">#&gt; </span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co">#&gt; </span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co">#&gt;     filter, lag</span></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="co">#&gt; </span></span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span></code></pre></div>
<p>The main article shows how to compare two documents and get a report showing overlap between the text at a given ngram level. You might have several documents that you want to compare. This tutorial develops methods for multiple-document comparision.</p>
<div id="read-in-some-pdfs" class="section level2">
<h2 class="hasAnchor">
<a href="#read-in-some-pdfs" class="anchor"></a>Read in some pdfs</h2>
<p>I don’t have a function for batch reading in a bunch of pdfs just yet. Reading in text from pdfs can be tricky business. Might be better to to write your own code for this so you can flag .pdfs that are behaving badly.</p>
<p>In any case, what we have here are a bunch of my papers, and two from sternberg. The first step is to read the papers in. Hopefully I don’t self-plagiarize very much, and Sternberg’s texts will pop out as having lots of overlap.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>file_paths &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list.files">list.files</a></span>(<span class="st">"pdfs/"</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a>pdf_txts &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>()</span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(file_paths)){</span>
<span id="cb2-5"><a href="#cb2-5"></a>  paper &lt;-<span class="st"> </span><span class="kw"><a href="../reference/clean_2_col_pdf.html">clean_2_col_pdf</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(<span class="st">"pdfs/"</span>,file_paths[i]))</span>
<span id="cb2-6"><a href="#cb2-6"></a>  pdf_txts[i] &lt;-<span class="st"> </span>qdapRegex<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/qdapRegex/topics/rm_non_ascii">rm_non_ascii</a></span>(paper) <span class="op">%&gt;%</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="st">    </span>LSAfun<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/LSAfun/topics/breakdown">breakdown</a></span>()</span>
<span id="cb2-8"><a href="#cb2-8"></a>}</span></code></pre></div>
</div>
<div id="compare-the-documents" class="section level2">
<h2 class="hasAnchor">
<a href="#compare-the-documents" class="anchor"></a>Compare the documents</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>the_texts &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unlist">unlist</a></span>(pdf_txts)</span>
<span id="cb3-2"><a href="#cb3-2"></a>out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/multi_doc_compare.html">multi_doc_compare</a></span>(<span class="dt">text=</span>the_texts,</span>
<span id="cb3-3"><a href="#cb3-3"></a>                         <span class="dt">n_grams =</span> <span class="dv">3</span>,</span>
<span id="cb3-4"><a href="#cb3-4"></a>                         <span class="dt">sd_criterion =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><img src="B_multidoc_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<p>The function returns several things:</p>
<ul>
<li>$dtm is the document term matrix, containing the n-gram frequency counts for each document</li>
<li>$histogram is a histogram of the similarity values, good to check for outliers with high similarity</li>
<li>$similarities is a cosine similarity matrix with the similarities between each document and every other document</li>
<li>$mean_similarity is the average similarity in the set</li>
<li>$sd_similarity is the standard deviation of the similarities. The sd_criterion uses the mean plus a multiplier of the sd_similarity</li>
<li>$check_these is a dataframe with pairs of documents that had a similarity score higher than the sd_criterion, these ones contain higher textual overlap than the rest of the set, and might be checked further.</li>
</ul>
<p>Let’s look at the similarities between the articles, not particularly compelling as you will see:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>knitr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Round">round</a></span>(out<span class="op">$</span>similarities, <span class="dt">digits=</span><span class="dv">2</span>))</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">1</th>
<th align="right">2</th>
<th align="right">3</th>
<th align="right">4</th>
<th align="right">5</th>
<th align="right">6</th>
<th align="right">7</th>
<th align="right">8</th>
<th align="right">9</th>
<th align="right">10</th>
<th align="right">11</th>
<th align="right">12</th>
<th align="right">13</th>
<th align="right">14</th>
<th align="right">15</th>
<th align="right">16</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1.00</td>
<td align="right">0.03</td>
<td align="right">0.03</td>
<td align="right">0.04</td>
<td align="right">0.03</td>
<td align="right">0.03</td>
<td align="right">0.05</td>
<td align="right">0.05</td>
<td align="right">0.03</td>
<td align="right">0.04</td>
<td align="right">0.03</td>
<td align="right">0.05</td>
<td align="right">0.06</td>
<td align="right">0.05</td>
<td align="right">0.02</td>
<td align="right">0.01</td>
</tr>
<tr class="even">
<td align="right">0.03</td>
<td align="right">1.00</td>
<td align="right">0.04</td>
<td align="right">0.05</td>
<td align="right">0.02</td>
<td align="right">0.08</td>
<td align="right">0.06</td>
<td align="right">0.02</td>
<td align="right">0.03</td>
<td align="right">0.03</td>
<td align="right">0.02</td>
<td align="right">0.03</td>
<td align="right">0.04</td>
<td align="right">0.03</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
</tr>
<tr class="odd">
<td align="right">0.03</td>
<td align="right">0.04</td>
<td align="right">1.00</td>
<td align="right">0.04</td>
<td align="right">0.02</td>
<td align="right">0.02</td>
<td align="right">0.05</td>
<td align="right">0.03</td>
<td align="right">0.03</td>
<td align="right">0.04</td>
<td align="right">0.04</td>
<td align="right">0.03</td>
<td align="right">0.03</td>
<td align="right">0.02</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
</tr>
<tr class="even">
<td align="right">0.04</td>
<td align="right">0.05</td>
<td align="right">0.04</td>
<td align="right">1.00</td>
<td align="right">0.08</td>
<td align="right">0.20</td>
<td align="right">0.05</td>
<td align="right">0.09</td>
<td align="right">0.04</td>
<td align="right">0.05</td>
<td align="right">0.04</td>
<td align="right">0.10</td>
<td align="right">0.14</td>
<td align="right">0.09</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
</tr>
<tr class="odd">
<td align="right">0.03</td>
<td align="right">0.02</td>
<td align="right">0.02</td>
<td align="right">0.08</td>
<td align="right">1.00</td>
<td align="right">0.08</td>
<td align="right">0.02</td>
<td align="right">0.05</td>
<td align="right">0.02</td>
<td align="right">0.03</td>
<td align="right">0.03</td>
<td align="right">0.07</td>
<td align="right">0.09</td>
<td align="right">0.11</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
</tr>
<tr class="even">
<td align="right">0.03</td>
<td align="right">0.08</td>
<td align="right">0.02</td>
<td align="right">0.20</td>
<td align="right">0.08</td>
<td align="right">1.00</td>
<td align="right">0.04</td>
<td align="right">0.07</td>
<td align="right">0.02</td>
<td align="right">0.14</td>
<td align="right">0.02</td>
<td align="right">0.09</td>
<td align="right">0.13</td>
<td align="right">0.10</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
</tr>
<tr class="odd">
<td align="right">0.05</td>
<td align="right">0.06</td>
<td align="right">0.05</td>
<td align="right">0.05</td>
<td align="right">0.02</td>
<td align="right">0.04</td>
<td align="right">1.00</td>
<td align="right">0.07</td>
<td align="right">0.08</td>
<td align="right">0.11</td>
<td align="right">0.06</td>
<td align="right">0.07</td>
<td align="right">0.06</td>
<td align="right">0.07</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
</tr>
<tr class="even">
<td align="right">0.05</td>
<td align="right">0.02</td>
<td align="right">0.03</td>
<td align="right">0.09</td>
<td align="right">0.05</td>
<td align="right">0.07</td>
<td align="right">0.07</td>
<td align="right">1.00</td>
<td align="right">0.05</td>
<td align="right">0.06</td>
<td align="right">0.04</td>
<td align="right">0.10</td>
<td align="right">0.09</td>
<td align="right">0.09</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
</tr>
<tr class="odd">
<td align="right">0.03</td>
<td align="right">0.03</td>
<td align="right">0.03</td>
<td align="right">0.04</td>
<td align="right">0.02</td>
<td align="right">0.02</td>
<td align="right">0.08</td>
<td align="right">0.05</td>
<td align="right">1.00</td>
<td align="right">0.08</td>
<td align="right">0.04</td>
<td align="right">0.04</td>
<td align="right">0.04</td>
<td align="right">0.04</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
</tr>
<tr class="even">
<td align="right">0.04</td>
<td align="right">0.03</td>
<td align="right">0.04</td>
<td align="right">0.05</td>
<td align="right">0.03</td>
<td align="right">0.14</td>
<td align="right">0.11</td>
<td align="right">0.06</td>
<td align="right">0.08</td>
<td align="right">1.00</td>
<td align="right">0.05</td>
<td align="right">0.07</td>
<td align="right">0.05</td>
<td align="right">0.05</td>
<td align="right">0.01</td>
<td align="right">0.00</td>
</tr>
<tr class="odd">
<td align="right">0.03</td>
<td align="right">0.02</td>
<td align="right">0.04</td>
<td align="right">0.04</td>
<td align="right">0.03</td>
<td align="right">0.02</td>
<td align="right">0.06</td>
<td align="right">0.04</td>
<td align="right">0.04</td>
<td align="right">0.05</td>
<td align="right">1.00</td>
<td align="right">0.03</td>
<td align="right">0.04</td>
<td align="right">0.03</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
</tr>
<tr class="even">
<td align="right">0.05</td>
<td align="right">0.03</td>
<td align="right">0.03</td>
<td align="right">0.10</td>
<td align="right">0.07</td>
<td align="right">0.09</td>
<td align="right">0.07</td>
<td align="right">0.10</td>
<td align="right">0.04</td>
<td align="right">0.07</td>
<td align="right">0.03</td>
<td align="right">1.00</td>
<td align="right">0.20</td>
<td align="right">0.17</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
</tr>
<tr class="odd">
<td align="right">0.06</td>
<td align="right">0.04</td>
<td align="right">0.03</td>
<td align="right">0.14</td>
<td align="right">0.09</td>
<td align="right">0.13</td>
<td align="right">0.06</td>
<td align="right">0.09</td>
<td align="right">0.04</td>
<td align="right">0.05</td>
<td align="right">0.04</td>
<td align="right">0.20</td>
<td align="right">1.00</td>
<td align="right">0.13</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
</tr>
<tr class="even">
<td align="right">0.05</td>
<td align="right">0.03</td>
<td align="right">0.02</td>
<td align="right">0.09</td>
<td align="right">0.11</td>
<td align="right">0.10</td>
<td align="right">0.07</td>
<td align="right">0.09</td>
<td align="right">0.04</td>
<td align="right">0.05</td>
<td align="right">0.03</td>
<td align="right">0.17</td>
<td align="right">0.13</td>
<td align="right">1.00</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
</tr>
<tr class="odd">
<td align="right">0.02</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">1.00</td>
<td align="right">0.66</td>
</tr>
<tr class="even">
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.00</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.01</td>
<td align="right">0.66</td>
<td align="right">1.00</td>
</tr>
</tbody>
</table>
</div>
<div id="check-these" class="section level2">
<h2 class="hasAnchor">
<a href="#check-these" class="anchor"></a>check these</h2>
<p>Well, are their any pairs we should check more closely? Yup, the sternberg papers.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>knitr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(out<span class="op">$</span>check_these)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">paper1</th>
<th align="left">paper2</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">sternberg2010b.pdf</td>
<td align="left">Sternberg2010.pdf</td>
</tr></tbody>
</table>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#read-in-some-pdfs">Read in some pdfs</a></li>
      <li><a href="#compare-the-documents">Compare the documents</a></li>
      <li><a href="#check-these">check these</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Matt Crump.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
